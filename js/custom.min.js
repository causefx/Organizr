var idleTime=0;var hasCookie=false;var loginAttempts=0;$(document).ajaxComplete(function(){pageLoad()});$(document).ready(function(){pageLoad();var d=new Clipboard(".clipboard");var b=new Clipboard("#internal-clipboard");d.on("success",function(f){message("Clipboard",f.text,activeInfo.settings.notifications.position,"#FFF","info","5000");f.clearSelection()});"use strict";var a=$("body");$(window).scroll(function(){if($(this).scrollTop()>100){$("#scroll").fadeIn()}else{$("#scroll").fadeOut()}});$("#scroll").click(function(){$("html, body").animate({scrollTop:0},600);return false});$(function(){var g=function(){var i=40,j=(window.innerWidth>0)?window.innerWidth:this.screen.width,h=((window.innerHeight>0)?window.innerHeight:this.screen.height)-1;if(j<768){$("div.navbar-collapse").addClass("collapse");i=100}else{$("div.navbar-collapse").removeClass("collapse")}if(j<1170){a.addClass("content-wrapper");$(".sidebar-nav, .slimScrollDiv").css("overflow-x","visible").parent().css("overflow","visible")}else{a.removeClass("content-wrapper")}h=h-i;if(h<1){h=1}if(h>i){$("#page-wrapper").css("min-height",(h)+"px")}},e=window.location,f=$("ul.nav a").filter(function(){return this.href===e||e.href.indexOf(this.href)===0}).addClass("activez").parent().parent().addClass("ok").parent();if(f.is("li")){f.addClass("activezo")}$(window).ready(g);$(window).bind("resize",g)});a.trigger("resize");var c=setInterval(timerIncrement,60000);hasCookie=(getCookie("organizrToken"))?true:false;$(this).mousemove(function(f){idleTime=0});$(this).keypress(function(f){idleTime=0});myLazyLoad=new LazyLoad({elements_selector:".lazyload"});(function(g,f,e){var i='[data-perform="panel-collapse"]',h='[data-perform="panel-dismiss"]';g(i).each(function(){var k={toggle:false},j=g(this).closest(".panel"),m=j.find(".panel-wrapper"),l=g(this).children("i");if(!m.length){m=j.children(".panel-heading").nextAll().wrapAll("<div/>").parent().addClass("panel-wrapper");k={}}m.collapse(k).on("hide.bs.collapse",function(){l.removeClass("ti-minus").addClass("ti-plus")}).on("show.bs.collapse",function(){l.removeClass("ti-plus").addClass("ti-minus")})});g(e).on("click",i,function(k){k.preventDefault();var j=g(this).closest(".panel"),l=j.find(".panel-wrapper");g(this).children("i").toggleClass("ti-plus").toggleClass("ti-minus");l.collapse("toggle")});g(e).on("click",h,function(l){l.preventDefault();var k=g(this).closest(".panel");function j(){var m=k.parent();k.remove();m.filter(function(){return(g(this).is('[class*="col-"]')&&g(this).children("*").length===0)}).remove()}j()})}(jQuery,window,document))});function pageLoad(){$(function(){if($("#preloader:visible").length==1){$("#preloader").fadeOut()}myLazyLoad.update()});new SimpleBar($("#page-wrapper")[0]);$(function(){if(bowser.mobile!==true){$('[data-toggle="tooltip"]').tooltip()}});$(function(){$('[data-toggle="popover"]').popover({trigger:"hover"})});$(function(){var a=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));$(".js-switch").each(function(){if($(this).attr("data-switchery")!=="true"){new Switchery($(this)[0],$(this).data())}})});$(".collapseble").on("click",function(){$(".collapseblebox").fadeToggle(350)});$(".popup-with-form").magnificPopup({type:"inline",preloader:true,removalDelay:500,showCloseBtn:false,callbacks:{beforeOpen:function(){if($(window).width()<700){this.st.focus=false}else{this.st.focus="#name"}this.st.mainClass=this.st.el.attr("data-effect")},beforeClose:function(){if($.magnificPopup.instance.currItem.inlineElement.find(".rubberBand").length!==0){if(!$.magnificPopup.instance.currItem.inlineElement.find(".rubberBand").hasClass("hidden")){var a=$.magnificPopup.instance.currItem.index;message("You forgot to save","<a class=\"mouse\" onclick=\"$('.popup-with-form').magnificPopup('open',"+a+')">Would you like to go back?</a>',activeInfo.settings.notifications.position,"#FFF","warning","5000")}}}}});$(".inline-popups").magnificPopup({removalDelay:500,closeOnBgClick:true,showCloseBtn:false,callbacks:{beforeOpen:function(){this.st.mainClass=this.st.el.attr("data-effect");this.st.focus=".inline-focus"},close:function(){if(typeof player!=="undefined"){console.log("STOP STOP STOP");player.destroy()}}},midClick:true})}$(".slimscrollright").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"});$(".slimscrollsidebar").slimScroll({height:"100%",position:"left",size:"6px",color:"rgba(0,0,0,0.5)"});if(bowser.mobile!==true){$(".inbox-center").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"})}$(".navbar-toggle").on("click",function(){$(".navbar-toggle i").toggleClass("ti-menu").addClass("ti-close")});$(document).on("click","#to-recover",function(a){$("#loginform").slideUp();$("#recoverform").fadeIn()});$(document).on("click",".to-register",function(a){$("#loginform").slideUp();$("#registerForm").removeClass("hidden");$("#registerform").fadeIn()});$(document).on("click","#leave-recover",function(a){$("#loginform").slideDown();$("#recoverform").fadeOut()});$(document).on("click","#leave-registration",function(a){$("#registerform").fadeOut();$("#registerForm").addClass("hidden");$("#loginform").slideDown()});$(document).on("click",".updateNow",function(a){updateNow()});$(document).on("click",".show-login",function(a){buildLogin()});$(document).on("click",".depenency-item",function(a){alert($(this).attr("data-name"))});function doneTypingMediaSearch(){var c=$("#mediaSearchQuery");var b=c.val();var d=c.attr("data-server");if(b==""||b==" "){return false}switch(d){case"plex":var a="getPlexSearch";break;case"emby":var a="getEmbySearch";break;default:}organizrAPI2("GET","api/v2/homepage/"+d+"/search/"+b).success(function(f){try{let response=f.response;$(".mediaSearch-div").html(buildMediaResults(response.data,d,b));if(bowser.mobile!==true){$(".resultBox-inside").slimScroll({height:"100%",position:"right",size:"5px",color:"#dcdcdc"})}}catch(g){organizrCatchError(g,f)}}).fail(function(e){OrganizrApiError(e,"API Error")})}$(document).on("click",".login-button",function(d){d.preventDefault;var c=$("#oAuth-Input").val();var f=$("#login-username-Input").val();if(c==""&&f==""){message("Login Error"," You need to enter a Username",activeInfo.settings.notifications.position,"#FFF","warning","10000");$("#login-username-Input").focus();return false}loginAttempts=loginAttempts+1;$("#login-attempts").val(loginAttempts);var a=(local("g","loggingIn"));if(a==null){local("s","loggingIn",true);$("div.login-box").block({message:'<h5><img width="20" src="plugins/images/busy.gif" /> Just a moment...</h4>',css:{color:"#fff",border:"1px solid #2cabe3",backgroundColor:"#2cabe3"}});var b=$("#loginform").serializeToJSON();organizrAPI2("POST","api/v2/login",b).success(function(e){local("set","message","Welcome|Login Successful|success");local("r","loggingIn");location.reload()}).fail(function(e){$("div.login-box").unblock({});switch(e.status){case 401:if(e.responseJSON.response.message=="2FA Code incorrect"){$("div.login-box").unblock({});$("#tfa-div").removeClass("hidden");$("#loginform [name=tfaCode]").focus()}break;case 403:$("div.login-box").block({message:'<h5><i class="fa fa-close"></i> Locked Out!</h4>',css:{color:"#fff",border:"1px solid #e91e63",backgroundColor:"#f44336"}});setTimeout(function(){local("r","loggingIn");location.reload()},10000);break;case 422:$("div.login-box").unblock({});$("#tfa-div").removeClass("hidden");$("#loginform [name=tfaCode]").focus();break;default:message("Login Error","API Connection Failed",activeInfo.settings.notifications.position,"#FFF","error","10000");console.error("Organizr Function: API Connection Failed")}message("Login Error",e.responseJSON.response.message,activeInfo.settings.notifications.position,"#FFF","warning","10000");console.error("Organizr Function: "+e.responseJSON.response.message);local("r","loggingIn")})}});$(document).on("click",".unlockButton",function(b){b.preventDefault;var a={password:$("#unlockPassword").val()};if(a==""){message("Password cannot be blank","",activeInfo.settings.notifications.position,"#FFF","error","5000");return false}organizrAPI2("POST","api/v2/users/unlock",a).success(function(c){let html=c.response;location.reload()}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".register-button",function(b){b.preventDefault;var a=$("#registerForm").serializeToJSON();console.log(a);organizrAPI2("POST","api/v2/users/register",a).success(function(c){let html=c.response;location.reload()}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".reset-button",function(c){c.preventDefault;var a=$("#recover-input").val();if(a!==""){var b={email:a};message("Submitting request...","",activeInfo.settings.notifications.position,"#FFF","info","10000");organizrAPI2("POST","api/v2/users/recover",b).success(function(e){var d=e.response;message("Recover Password",d.message,activeInfo.settings.notifications.position,"#FFF","success","10000");$("#leave-recover").trigger("click")}).fail(function(d){OrganizrApiError(d,"API Error")})}else{message("Recover Error","Enter Email",activeInfo.settings.notifications.position,"#FFF","warning","10000")}});$(document).on("click",".open-close",function(){$("body").toggleClass("show-sidebar")});$(document).on("click",".editGroupButton",function(){$("#edit-group-form [name=group]").val($(this).parent().parent().attr("data-group"));$("#edit-group-form [name=id]").val($(this).parent().parent().attr("data-id"));$("#edit-group-form [name=image]").val($(this).parent().parent().attr("data-image"))});$(document).on("click",".editGroup",function(){var b=$("#edit-group-form").serializeToJSON();var a=$.Callbacks();if(typeof b.id=="undefined"||b.id==""){message("Edit Tab Error"," Could not get ID",activeInfo.settings.notifications.position,"#FFF","error","5000");return false}if(typeof b.group=="undefined"||b.group==""){message("Edit Tab Error"," Please set a Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof b.image=="undefined"||b.image==""){message("Edit Tab Error"," Please set an Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}a.add(buildGroupManagement);organizrAPI2("PUT","api/v2/groups/"+b.id,b,true).success(function(d){try{var c=d.response}catch(f){organizrCatchError(f,d)}message(c.message,"",activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}clearForm("#edit-group-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".changeDefaultGroup",function(){var b=$(this).parent().parent().attr("data-id");var a=$.Callbacks();a.add(buildGroupManagement);organizrAPI2("PUT","api/v2/groups/"+b,{"default":1},true).success(function(d){try{var c=d.response;message(c.message,"",activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}}catch(f){organizrCatchError(f,d)}}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".deleteUserGroup",function(){var a=$(this);swal({title:window.lang.translate("Delete ")+a.parent().parent().attr("data-group")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){var c=a.parent().parent().attr("data-id");var b=$.Callbacks();b.add(buildGroupManagement);organizrAPI2("DELETE","api/v2/groups/"+c,null,true).success(function(f){try{message("Group Deleted","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}catch(g){organizrCatchError(g,f)}}).fail(function(e){OrganizrApiError(e,"API Error")})}})});$(document).on("click",".addNewGroup",function(){var b=$("#new-group-form").serializeToJSON();console.log(b);if(typeof b.group=="undefined"||b.group==""){message("New Group Error"," Please set a Group Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof b.image=="undefined"||b.image==""){message("New Group Error"," Please set a Group Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}var a=$.Callbacks();a.add(buildGroupManagement);organizrAPI2("POST","api/v2/groups",b,true).success(function(d){try{var c=d.response;message(c.message,"",activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}clearForm("#new-group-form");$.magnificPopup.close()}catch(f){organizrCatchError(f,d)}}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".addNewUser",function(){var a=$("#new-user-form").serializeToJSON();$.each(a,function(d,c){if(c==""){delete a[d]}});console.log(a);var b=$.Callbacks();b.add(buildUserManagement);organizrAPI2("POST","api/v2/users",a,true).success(function(d){try{var c=d.response}catch(f){organizrCatchError(f,d)}message("User Created",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}clearForm("#new-user-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("click",".editUserButton",function(){$("#edit-user-form [name=username]").val($(this).parent().parent().attr("data-username"));$("#edit-user-form [name=id]").val($(this).parent().parent().attr("data-id"));$("#edit-user-form [name=email]").val($(this).parent().parent().attr("data-email"))});$(document).on("click",".editUserAdmin",function(){var a=$("#edit-user-form").serializeToJSON();$.each(a,function(d,c){if(c==""){delete a[d]}});if(typeof a.id=="undefined"||a.id==""){message("Edit User Error"," Could not get User ID",activeInfo.settings.notifications.position,"#FFF","error","5000");return false}if(a.password!==""&&a.password!==a.password2){message("Edit User Error"," Passwords do not match!",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}var b=$.Callbacks();b.add(buildUserManagement);organizrAPI2("PUT","api/v2/users/"+a.id,a,true).success(function(d){try{var c=d.response}catch(f){organizrCatchError(f,d)}message("User Updated",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}clearForm("#edit-user-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"API Error")})});$(document).on("change",".userGroupSelect",function(){var c=$(this).parent().parent().attr("data-id");var a=$(this).find("option:selected").val();var b=$.Callbacks();b.add(buildUserManagement);organizrAPI2("PUT","api/v2/users/"+c,{group_id:a},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("User Group Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(d){OrganizrApiError(d,"API Error")})});$(document).on("click",".deleteUser",function(){var a=$(this);swal({title:window.lang.translate("Delete ")+a.parent().parent().attr("data-username")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){var c=a.parent().parent().attr("data-id");var b=$.Callbacks();b.add(buildUserManagement);organizrAPI2("DELETE","api/v2/users/"+c,null,true).success(function(e){message("User Deleted","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(e){OrganizrApiError(e,"User Delete Error")})}})});$(document).on("change",".tabGroupSelect",function(c){var d=$(this).parent().parent().attr("data-id");var a=$(this).find("option:selected").val();var b=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+d,{group_id:a},true).success(function(g){try{var f=g.response}catch(h){organizrCatchError(h,g)}message("Tab Group Updated",f.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(e){OrganizrApiError(e,"Tab Group Error")})});$(document).on("change",".tabCategorySelect",function(){var c=$(this).parent().parent().attr("data-id");var b=$(this).find("option:selected").val();var a=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{category_id:b},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Category Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Category Error")})});$(document).on("change",".tabTypeSelect",function(){var c=$(this).parent().parent().attr("data-id");var a=$(this).find("option:selected").val();var b=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{type:a},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Type Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Type Error")})});$(document).on("change",".enabledSwitch",function(){var c=$(this).parent().parent().attr("data-id");var a=$(this).prop("checked")?1:0;var b=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{enabled:a},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Enable Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Enable Error")})});$(document).on("change",".splashSwitch",function(){var c=$(this).parent().parent().attr("data-id");var a=$(this).prop("checked")?1:0;var b=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{splash:a},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Splash Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Splash Error")})});$(document).on("change",".pingSwitch",function(){var c=$(this).parent().parent().attr("data-id");var b=$(this).prop("checked")?1:0;var a=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{ping:b},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Ping Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Ping Error")})});$(document).on("change",".preloadSwitch",function(){var c=$(this).parent().parent().attr("data-id");var a=$(this).prop("checked")?1:0;var b=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+c,{preload:a},true).success(function(f){try{var d=f.response}catch(g){organizrCatchError(g,f)}message("Tab Preload Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(d){OrganizrApiError(d,"Tab Preload Error")})});$(document).on("change",".defaultSwitch",function(){var b=$(this).parent().parent().parent().attr("data-id");var a=$.Callbacks();organizrAPI2("PUT","api/v2/tabs/"+b,{"default":1},true).success(function(d){try{var c=d.response}catch(f){organizrCatchError(f,d)}message("Default Tab Updated",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}}).fail(function(c){OrganizrApiError(c,"Default Tab Error")})});$(document).on("click",".deleteTab",function(){var a=$(this);swal({title:window.lang.translate("Delete ")+a.parent().parent().attr("data-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){var c=a.parent().parent().attr("data-id");var b=$.Callbacks();b.add(buildTabEditor);organizrAPI2("DELETE","api/v2/tabs/"+c,null,true).success(function(e){message("Tab Deleted","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(e){OrganizrApiError(e,"Tab Deleted Error")})}})});function convertMsToMinutes(a){if(a===false||a===0||a==="0"){return 0}else{return(a/1000)/60}}function convertMinutesToMs(a){if(a===false||a===0||a==="0"){return 0}else{return(a*1000)*60}}$(document).on("click",".editTab",function(){var b=$("#originalTabName").html();var a=$("#edit-tab-form").serializeToJSON();if(typeof a.id=="undefined"||a.id==""){message("Edit Tab Error"," Could not get Tab ID",activeInfo.settings.notifications.position,"#FFF","error","5000");return false}if(typeof a.name=="undefined"||a.name==""){message("Edit Tab Error"," Please set a Tab Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof a.image=="undefined"||a.image==""){message("Edit Tab Error"," Please set a Tab Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if((typeof a.url=="undefined"||a.url=="")&&(typeof a.url_local=="undefined"||a.url_local=="")){message("Edit Tab Error"," Please set a Tab URL or Local URL",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(checkIfTabNameExists(a.name)&&b!==a.name){message("Edit Tab Error"," Tab name already used",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(a.timeout_ms!==""||typeof a.timeout_ms!=="undefined"){a.timeout_ms=convertMinutesToMs(a.timeout_ms)}if(a.id!==""&&a.tabName!==""&&a.tabImage!==""){var c=$.Callbacks();c.add(buildTabEditor);organizrAPI2("PUT","api/v2/tabs/"+a.id,a,true).success(function(f){try{var d=f.response;console.log(d)}catch(g){organizrCatchError(g,f)}message("Tab Updated",d.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(c){c.fire()}clearForm("#edit-tab-form");$.magnificPopup.close()}).fail(function(d){OrganizrApiError(d,"Tab Error")})}});$(document).on("click",".addNewTab",function(){var a=$("#new-tab-form").serializeToJSON();a.order=parseInt($("#tabEditorTable").find("tr[data-order]").last().attr("data-order"))+1;if(typeof a.name=="undefined"||a.name==""){message("Edit Tab Error"," Please set a Tab Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof a.image=="undefined"||a.image==""){message("Edit Tab Error"," Please set a Tab Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if((typeof a.url=="undefined"||a.url=="")&&(typeof a.url_local=="undefined"||a.url_local=="")){message("Edit Tab Error"," Please set a Tab URL or Local URL",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(checkIfTabNameExists(a.name)){message("Edit Tab Error"," Tab name already used",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(a.timeout_ms!==""||typeof a.timeout_ms!=="undefined"){a.timeout_ms=convertMinutesToMs(a.timeout_ms)}if(a.order!==""&&a.name!==""&&(a.url!==""||a.url_local!=="")&&a.image!==""){var b=$.Callbacks();b.add(buildTabEditor);organizrAPI2("POST","api/v2/tabs",a,true).success(function(d){try{var c=d.response;console.log(c)}catch(f){organizrCatchError(f,d)}message("Tab Created",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}clearForm("#new-tab-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"Tab Error")})}});$(document).on("click",".addNewCategory",function(){var a=$("#new-category-form").serializeToJSON();a.order=parseInt($("#categoryEditorTable").find("tr[data-order]").last().attr("data-order"))+1;if(typeof a.category=="undefined"||a.category==""){message("Edit Tab Error"," Please set a Category Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof a.image=="undefined"||a.image==""){message("Edit Tab Error"," Please set a Category Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(a.category!==""&&a.image!==""){var b=$.Callbacks();b.add(buildCategoryEditor);organizrAPI2("POST","api/v2/categories",a,true).success(function(d){try{var c=d.response;console.log(c)}catch(f){organizrCatchError(f,d)}message("Category Added",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}clearForm("#new-category-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"Category Error")})}});$(document).on("click",".deleteCategory",function(){var a=$(this);swal({title:window.lang.translate("Delete ")+a.parent().parent().attr("data-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){var c=a.parent().parent().attr("data-id");var b=$.Callbacks();b.add(buildCategoryEditor);organizrAPI2("DELETE","api/v2/categories/"+c,null,true).success(function(e){message("Category Deleted","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}).fail(function(e){OrganizrApiError(e,"Category Deleted Error")})}})});$(document).on("click",".editCategoryButton",function(){$("#edit-category-form [name=category]").val($(this).parent().parent().attr("data-name"));$("#edit-category-form [name=image]").val($(this).parent().parent().attr("data-image"));$("#edit-category-form [name=id]").val($(this).parent().parent().attr("data-id"))});$(document).on("click",".editCategory",function(){var a=$("#edit-category-form").serializeToJSON();if(typeof a.id=="undefined"||a.id==""){message("Edit Tab Error"," Could not get Category ID",activeInfo.settings.notifications.position,"#FFF","error","5000");return false}if(typeof a.category=="undefined"||a.category==""){message("Edit Tab Error"," Please set a Category Name",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(typeof a.image=="undefined"||a.image==""){message("Edit Tab Error"," Please set a Category Image",activeInfo.settings.notifications.position,"#FFF","warning","5000");return false}if(a.id!==""&&a.category!==""&&a.image!==""){var b=$.Callbacks();b.add(buildCategoryEditor);organizrAPI2("PUT","api/v2/categories/"+a.id,a,true).success(function(d){try{var c=d.response;console.log(c)}catch(f){organizrCatchError(f,d)}message("Category Updated",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}clearForm("#edit-category-form");$.magnificPopup.close()}).fail(function(c){OrganizrApiError(c,"Category Error")})}});$(document).on("click",".changeDefaultCategory",function(){var b=$(this).parent().parent().attr("data-id");var a=$.Callbacks();a.add(buildCategoryEditor);organizrAPI2("PUT","api/v2/categories/"+b,{"default":1},true).success(function(d){try{var c=d.response}catch(f){organizrCatchError(f,d)}message("Default Category Updated",c.message,activeInfo.settings.notifications.position,"#FFF","success","5000");if(a){a.fire()}}).fail(function(c){OrganizrApiError(c,"Default Cateogry Error")})});$(document).on("click",".saveCss",function(){$(".cssTextarea").val(cssEditor.getValue()).trigger("change")});$(document).on("click",".saveThemeCss",function(){$(".cssThemeTextarea").val(cssThemeEditor.getValue()).trigger("change")});$(document).on("click",".saveJava",function(){$(".javaTextarea").val(javaEditor.getValue()).trigger("change")});$(document).on("click",".saveThemeJava",function(){$(".javaThemeTextarea").val(javaThemeEditor.getValue()).trigger("change")});$(document).on("click",".savecustomHTMLoneTextarea",function(){$(".customHTMLoneTextarea").val(customHTMLoneEditor.getValue()).trigger("change")});$(document).on("click",".savecustomHTMLtwoTextarea",function(){$(".customHTMLtwoTextarea").val(customHTMLtwoEditor.getValue()).trigger("change")});$(document).on("focusout","input.pick-a-color",function(c){var a=$(this).attr("data-original");var b=$(this).val();if((a!==b)&&(b!=="#987654")&&b!==""){$(this).change();$(this).attr("data-original",b)}else{if(b==""){$(this).attr("style","")}}});$(document).on("change keydown",".addFormTick :input",function(c){$(this).attr("data-changed",true);$(this).closest(".form-group").addClass("has-success");var b=$(this).closest("form").attr("id");$("#"+b+"-save").removeClass("hidden");switch($(this).attr("type")){case"switch":case"checkbox":var a=$(this).prop("checked")?true:false;break;default:var a=$(this).val()}if($(this).hasClass("themeChanger")){changeTheme(a)}if($(this).hasClass("styleChanger")){changeStyle(a)}if($(this).hasClass("notifyChanger")){activeInfo.settings.notifications.backbone=a;defineNotification()}if($(this).hasClass("notifyPositionChanger")){activeInfo.settings.notifications.position=a}if($(this).hasClass("authDebug")){activeInfo.settings.misc.authDebug=a}});$(document).on("click",".deleteImage",function(){var a=$(this);swal({title:window.lang.translate("Delete ")+a.attr("data-image-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){var b={api:"api/v2/image/"+a.attr("data-image-name-ext"),messageTitle:"",messageBody:window.lang.translate("Deleted Image")+": "+a.attr("data-image-name"),error:"Organizr Function: User API Connection Failed"};var c=$.Callbacks();c.add(buildImageManagerView);organizrAPI2("DELETE",b.api,"",true).success(function(g){try{var f=g.response}catch(h){organizrCatchError(h,g)}message(b.messageTitle,b.messageBody,activeInfo.settings.notifications.position,"#FFF","success","5000");if(c){c.fire()}}).fail(function(e){OrganizrApiError(e,"Image Error")})}})});$(document).on("click",".reload",function(){location.reload()});$(document).on("click",".enablePlugin",function(){ajaxloader(".content-wrap","in");let pluginConfigValue=$(this).attr("data-config-name");let callbacks=$.Callbacks();callbacks.add(buildPlugins);callbacks.add(ajaxloader);let data={};data[pluginConfigValue]="true";organizrAPI2("PUT","api/v2/config",data,true).success(function(a){try{message("Plugin Enabled","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(callbacks){callbacks.fire()}}catch(b){organizrCatchError(b,a)}}).fail(function(a){OrganizrApiError(a,"Plugin Error");ajaxloader()})});$(document).on("click",".disablePlugin",function(){var a=$(this);swal({title:window.lang.translate("Disable")+" "+a.attr("data-plugin-name")+"?",icon:"warning",buttons:{cancel:window.lang.translate("No"),confirm:window.lang.translate("Yes")},dangerMode:true,confirmButtonColor:"#DD6B55"}).then(function(d){if(d){ajaxloader(".content-wrap","in");let pluginConfigValue=a.attr("data-config-name");var b=$.Callbacks();b.add(buildPlugins);b.add(ajaxloader);var c={};c[pluginConfigValue]="false";organizrAPI2("PUT","api/v2/config",c,true).success(function(f){try{message("Plugin Disabled","",activeInfo.settings.notifications.position,"#FFF","success","5000");if(b){b.fire()}}catch(g){organizrCatchError(g,f)}}).fail(function(e){OrganizrApiError(e,"Plugin Error");ajaxloader()})}})});$(document).on("change","#authSelect, #authBackendSelect",function(a){changeAuth()});$(document).on("change","#plexMachineSelector",function(a){let selector=$(this).attr("data-selector");$(selector).val($(this).val());$(selector).change();messageSingle("Machine ID selected","Please save...",activeInfo.settings.notifications.position,"#FFF","success","5000")});$(document).on("click",".closeErrorPage",function(){$(".error-page").html("");$(".error-page").fadeOut()});$(document).on("click",".testPath",function(){var a=$("#form-dbPath").val();if(typeof a=="undefined"||a==""){message("Path Error"," Please enter a path for DB",activeInfo.settings.notifications.position,"#FFF","warning","10000")}else{organizrAPI2("POST","api/v2/test/path",{path:a}).success(function(c){var b=c.response;message("Path"," Path is good to go",activeInfo.settings.notifications.position,"#FFF","success","10000")}).fail(function(b){OrganizrApiError(b,"API Error")})}});$(document).on({mouseenter:function(){$(this).find(".progress").toggleClass("progress-lg");$(this).find(".progress").find("span").toggleClass("hidden");$(this).find(".white-box").toggleClass("nowPlayingHover")},mouseleave:function(){$(this).find(".progress").toggleClass("progress-lg");$(this).find(".progress").find("span").toggleClass("hidden");$(this).find(".white-box").toggleClass("nowPlayingHover")}},".nowPlayingItem");$(document).on("click",".recent-filter li>a",function(){var c=$(this).attr("data-filter");var b=$(this).attr("server-filter");if(c=="all"){$("."+b+"-recent").find(".recent-item").parent().removeClass("hidden")}else{$("."+b+"-recent").find(".recent-item").parent().removeClass("hidden");$("."+b+"-recent").find(".recent-item:not(."+c+")").parent().addClass("hidden")}var a=$("."+b+"-recent");a.owlCarousel();a.trigger("refresh.owl.carousel");a.trigger("to.owl.carousel",0)});$(document).on("click",".filter-request-result",function(){var a=$(this).attr("data-filter");if(a=="request-result-all"){$(".request-result-item").removeClass("hidden")}else{$(".request-result-item").addClass("hidden");$("."+a).removeClass("hidden")}});$(document).on("click",".playlist-filter li>a",function(){var c=$(this).attr("data-filter");var a=$(this).attr("data-filter")+"-playlist";var d=decodeURI($(this).attr("data-title"));var b=$(this).attr("server-filter");$("."+b+"-playlistTitle").html(d);$("."+b+"-playlist").addClass("hidden");$("."+c+"-playlist").removeClass("hidden");$(".playlist-next").attr("onclick","owlChange('"+a+"','next');");$(".playlist-previous").attr("onclick","owlChange('"+a+"','previous');")});$(document).on("click",".refreshImage",function(d){message(""," Refreshing Image...",activeInfo.settings.notifications.position,"#FFF","success","1000");d.preventDefault;var b=$(this).attr("data-image");var c=$(this).attr("data-type");switch(c){case"nowPlaying":var f=$(this).parent().parent().parent().parent().find(".imageSource");f.attr("src",b);break;case"recent-item":var a=$(this).parent().parent().parent().find(".imageSourceAlt");var f=$(this).parent().parent().parent().parent().find(".imageSource");f.attr("style",'background-image: url("'+b+'");');a.attr("src",b);break;default:}setTimeout(function(){message("Image Refreshed "," Clear Cache Please",activeInfo.settings.notifications.position,"#FFF","success","3000")},1000)});$(document).on("click",".openTab",function(f){if($(this).attr("data-open-tab")==="true"){var d=$(this).attr("data-tab-name");var a=$("#container-"+d);var b=a.children("iframe");if(b.length===1){$("#menu-"+d+" a").trigger("click");b.attr("src",$(this).attr("data-url"))}else{a.attr("data-url",$(this).attr("data-url"));$("#menu-"+d+" a").trigger("click")}}else{var c=$(this).attr("data-url");window.open(c,"_blank")}$.magnificPopup.close()});$(document).on("click",".request-item",function(b){var a=$(this).attr("data-target");$("#link-"+a).trigger("click")});$(document).on("click",".metadata-get",function(f){if($(f.target).hasClass("mdi-refresh")){return}$("#preloader").fadeIn();var b=$(this).attr("data-key");var a=$(this).attr("data-uid");var d=$(this).attr("data-source");switch(d){case"plex":var c="getPlexMetadata";break;case"emby":case"jellyfin":var c="getEmbyMetadata";break;default:}ajaxloader(".content-wrap","in");organizrAPI2("POST","api/v2/homepage/"+d+"/metadata",{key:b}).success(function(e){let response=e.response;$("."+a+"-metadata-info").html("");$("."+a+"-metadata-info").html(buildMetadata(response.data,d));$("."+a).trigger("click");$(".metadata-actors").owlCarousel({autoplay:true,slideSpeed:300,paginationSpeed:400,nav:false,dots:false,margin:10,autoWidth:true,items:4});ajaxloader();$("#preloader").fadeOut()}).fail(function(e){OrganizrApiError(e,"API Error");ajaxloader();$("#preloader").fadeOut()})});$(document).on("click",".downloader",function(a){let action=$(this).attr("data-action");let source=$(this).attr("data-source");let target=$(this).attr("data-target");let api=null;switch(source){case"sabnzbd":api="api/v2/homepage/sabnzbd/queue/"+action;break;default:return false}messageSingle("Sending command to downloader","",activeInfo.settings.notifications.position,"#FFF","info","2500");organizrAPI2("POST",api,{target:target}).success(function(b){homepageDownloader(source);messageSingle("Successful","",activeInfo.settings.notifications.position,"#FFF","success","2500")}).fail(function(b){OrganizrApiError(b,"API Error")})});$(document).on("click",".testTab",function(){var a=$("#new-tab-form-inputURLNew");if(a.val()==""){message("","Please enter a URL",activeInfo.settings.notifications.position,"#FFF","warning","5000")}if(a.val()!==""){var b={url:a.val()};organizrAPI2("POST","api/v2/test/iframe",b).success(function(c){let html=c.response;$(".tabTestMessage.alert-success").removeClass("hidden");$(".tabTestMessage.alert-danger").addClass("hidden");setTimeout(function(){$(".tabTestMessage.alert-success").addClass("hidden")},5000)}).fail(function(c){OrganizrApiError(c,"API Error");$(".tabTestMessage.alert-danger").removeClass("hidden");$(".tabTestMessage.alert-success").addClass("hidden");setTimeout(function(){$(".tabTestMessage.alert-danger").addClass("hidden")},5000)})}});$(document).on("click",".testEditTab",function(){var a=$("#edit-tab-form-inputURL");if(a.val()==""){message("","Please enter a URL",activeInfo.settings.notifications.position,"#FFF","warning","5000")}if(a.val()!==""){var b={url:a.val()};message("Checking URL now...","",activeInfo.settings.notifications.position,"#FFF","info","5000");organizrAPI2("POST","api/v2/test/iframe",b).success(function(c){let html=c.response;$(".tabEditTestMessage.alert-success").removeClass("hidden");$(".tabEditTestMessage.alert-danger").addClass("hidden");setTimeout(function(){$(".tabEditTestMessage.alert-success").addClass("hidden")},5000)}).fail(function(c){OrganizrApiError(c,"API Error");$(".tabEditTestMessage.alert-danger").removeClass("hidden");$(".tabEditTestMessage.alert-success").addClass("hidden");setTimeout(function(){$(".tabEditTestMessage.alert-danger").addClass("hidden")},5000)})}});$(document).on("click",".newAPIKey",function(){$("#settings-main-form [name=organizrAPI]").val(generateCode());$("#settings-main-form [name=organizrAPI]").change()});$(document).on("click",".purgeLog",function(){var a=$(".swapLog.active").attr("data-name");if(a!==""){var b={api:"api/v2/log/"+a,messageTitle:"",messageBody:window.lang.translate("Deleted Log")+": "+a,error:"Organizr Function: User API Connection Failed"};organizrAPI2("DELETE",b.api,"",true).success(function(f){loadSettingsPage2("api/v2/page/settings_settings_logs","#settings-settings-logs","Log Viewer");try{var c=f.response}catch(g){organizrCatchError(g,f)}message(b.messageTitle,b.messageBody,activeInfo.settings.notifications.position,"#FFF","success","5000");var d=$.Callbacks();switch($(this).attr("data-name")){case"loginLog":loginLogTable.ajax.reload(null,false);break;case"orgLog":organizrLogTable.ajax.reload(null,false);break;default:}if(d){d.fire()}}).fail(function(c){OrganizrApiError(c,"API Error")})}});$(document).on("click",".delete-backup",function(){$("#settings-settings-backup").block({message:'<p style="margin:0;padding:8px;font-size:24px;" lang="en">Deleting Backup...</p>',css:{color:"#fff",border:"1px solid #5761a9",backgroundColor:"#707cd2"}});let filename=$(this).attr("data-file");if(filename!==""){let post={api:"api/v2/backup/"+filename,messageTitle:"",messageBody:window.lang.translate("Deleted Backup")+": "+filename,error:"Organizr Function: Backup API Connection Failed"};organizrAPI2("DELETE",post.api,"",true).success(function(a){message(post.messageTitle,post.messageBody,activeInfo.settings.notifications.position,"#FFF","success","5000");getOrganizrBackups();$("#settings-settings-backup").unblock()}).fail(function(a){OrganizrApiError(a,"API Error");$("#settings-settings-backup").unblock()})}});$(document).on("click",".showPassword",function(){var a=$(this).parent().parent().find(".password-alt");if(a.attr("type")==="password"){a.attr("type","text")}else{a.attr("type","password")}$(this).find(".passwordToggle").toggleClass("fa-eye").toggleClass("fa-eye-slash")});$(document).on("click",".emailUser",function(){var a=$(this).parent().parent().attr("data-email");if(activeInfo.plugins["PHPMAILER-enabled"]==true){$(".emailModal").click();$("#sendEmailToInput").val(a)}else{message("Email","Plugin not setup",activeInfo.settings.notifications.position,"#FFF","warning","5000")}});$(document).on("click","a[class*=ID-]",function(){var b=$(this).attr("data-details");var c=$(this).attr("data-target")+"-metadata-info";var a=JSON.parse(b);$("."+c).html(buildCalendarMetadata(a));myLazyLoad.update()});$(document).on("change",".filter-request-input",function(){$(".request-item").parent().removeClass("hidden");var a=[];$(".filter-request-input").each(function(){var d=$(this).prop("checked");var c=$(this).attr("data-filter");if(d==false){a.push("."+c)}});$(".request-item").each(function(){var d=$(this);var c=a.join(", ");if(d.is(c)){d.parent().addClass("hidden")}});var b=$(".request-items");b.owlCarousel();b.trigger("refresh.owl.carousel");b.trigger("to.owl.carousel",0)});var typingTimer;$(document).on("keyup","#request-input",function(){clearTimeout(typingTimer);typingTimer=setTimeout(doneTyping,750)});$(document).on("keyup","#mediaSearchQuery",function(){clearTimeout(typingTimer);typingTimer=setTimeout(doneTypingMediaSearch,750)});$(document).on("keydown","#request-input",function(){clearTimeout(typingTimer)});$(document).on("keydown","#mediaSearchQuery",function(){clearTimeout(typingTimer)});$(document).on("keydown","body",function(){blockDev()});$(document).on("click",".right-side-toggle",function(){$(".right-sidebar").slideDown(50).toggleClass("shw-rside");$(".fxhdr").on("click",function(){$("body").toggleClass("fix-header")});$(".fxsdr").on("click",function(){$("body").toggleClass("fix-sidebar")});var a=$(".fxhdr");if($("body").hasClass("fix-header")){a.attr("checked",true)}else{a.attr("checked",false)}});$(document).on("mousewheel",".recent-items .owl-stage",function(a){if(a.shiftKey){if(a.deltaY>0){$(".recent-items").trigger("next.owl")}else{$(".recent-items").trigger("prev.owl")}a.preventDefault()}});$(document).on("mousewheel",".playlist-items .owl-stage",function(a){if(a.shiftKey){if(a.deltaY>0){$(".playlist-items").trigger("next.owl")}else{$(".playlist-items").trigger("prev.owl")}a.preventDefault()}});$(document).on("mousewheel",".request-items .owl-stage",function(a){if(a.shiftKey){if(a.deltaY>0){$(".request-items").trigger("next.owl")}else{$(".request-items").trigger("prev.owl")}a.preventDefault()}});Mousetrap.bind("r r",function(){reloadCurrentTab()});Mousetrap.bind("c c",function(){closeCurrentTab(event)});Mousetrap.bind("s s",function(){openSettings()});Mousetrap.bind("h h",function(){openHomepage()});Mousetrap.bind("f f",function(){toggleFullScreen()});Mousetrap.bind("d d",function(){toggleDebug()});Mousetrap.bind("esc",function(){$(".splash-screen").removeClass("in").addClass("hidden")});Mousetrap.bind("ctrl+shift+up",function(c){var a=$(".allTabsList a.active").parent();var b=a.prev().children();b.trigger("click");parent.focus();return false});Mousetrap.bind("ctrl+shift+down",function(c){var b=$(".allTabsList a.active").parent();var a=b.next().children();a.trigger("click");return false});$(document).on("change","#new-tab-form-chooseImage",function(b){var a=$("#new-tab-form-chooseImage").val();if(a!=="Select or type Icon"){$("#new-tab-form-inputImageNew").val(a)}});$(document).on("change","#edit-tab-form-chooseImage",function(b){var a=$("#edit-tab-form-chooseImage").val();if(a!=="Select or type Icon"){$("#edit-tab-form-inputImage").val(a)}});$(document).on("change","#new-tab-form-chooseIcon",function(b){var a=$("#new-tab-form-chooseIcon").val();if(a!=="Select or type Icon"){$("#new-tab-form-inputImageNew").val(a)}});$(document).on("change","#edit-tab-form-chooseIcon",function(b){var a=$("#edit-tab-form-chooseIcon").val();if(a!=="Select or type Icon"){$("#edit-tab-form-inputImage").val(a)}});$(document).on("change","#choose-calender-filter, #choose-calender-filter-status",function(a){filter=$("#choose-calender-filter").val();filterDownload=$("#choose-calender-filter-status").val();$("#calendar").fullCalendar("rerenderEvents");new SimpleBar($(".fc-scroller")[0])});$(document).on("keyup","#debug-input",function(a){console.log(this);if(a.keyCode==13){orgDebug()}});$(document).on("click",".sticon",function(){var b=$(this).attr("href");var c=$(b).find(".customtab2 > li");if(c.length!==0){var a=false;$(c).each(function(d,f){var e=$(this).hasClass("active");if(e){a=true}});if(a==false){let el=$(c).find("a").first();$(el).trigger("click")}}});$(document).on("click",".help-modal",function(){var c=$(this).attr("data-modal");var d="";var a="";$("#help-modal-title").html("");$("#help-modal-body").html("");switch(c){case"tabs":d="Tab Help";var b=[{title:"Name",body:"The text that will be displayed for that certain tab"},{title:"Category",body:"Each Tab is assigned a Category, the default is unsorted.  You may create new categories on the Category settings tab"},{title:"Group",body:"The lowest Group that will have access to this tab"},{title:"Type",body:"Internal is for Organizr pages<br/>iFrame is for all others<br/>New Window is for items to open in a new window"},{title:"Default",body:"You can choose one tab to be the first opened tab on page load"},{title:"Active",body:"Either mark a tab as active or inactive"},{title:"Splash",body:"Toggle this to add the tab to the Splash Page on page load"},{title:"Ping",body:"Enable Organizr to ping the status of the local URL of this tab"},{title:"Preload",body:"Toggle this tab to loaded in the background on page load"}];a=buildAccordion(b);break;default:return null}$("#help-modal-title").html(d);$("#help-modal-body").html(a);$(".help-modal-lg").modal("show")});$(document).on("click",".close-popup",function(){$.magnificPopup.close()});$(document).on("click",".copyDebug",function(){copyDebug();$("#internal-clipboard").trigger("click")});$(document).on("keyup","#authBackendHostPrefix-input, #authBackendHostSuffix-input",function(){var a=$("#authBackendHostPrefix-input").val()+"TestAcct"+$("#authBackendHostSuffix-input").val();$("#accountDN").html(a)});$(document).on("click",".showMoreHealth",function(){var a=$(this).attr("data-id");$(".showMoreHealthDiv-"+a).toggleClass("d-none");$(this).find(".card-body").toggleClass("healthPosition")});$(document).on("click",".ipInfo",function(){$.getJSON("https://ipinfo.io/"+$(this).text()+"/?token=ddd0c072ad5021",function(c){var h=(typeof c.region=="undefined")?" N/A":c.region;var g=(typeof c.ip=="undefined")?" N/A":c.ip;var i=(typeof c.hostname=="undefined")?" N/A":c.hostname;var e=(typeof c.loc=="undefined")?" N/A":c.loc;var j=(typeof c.org=="undefined")?" N/A":c.org;var d=(typeof c.city=="undefined")?" N/A":c.city;var b=(typeof c.country=="undefined")?" N/A":c.country;var f=(typeof c.phone=="undefined")?" N/A":c.phone;var a='<div class="row"><div class="col-lg-12"><div class="white-box"><h3 class="box-title">'+g+'</h3><div class="table-responsive"><table class="table"><tbody><tr><td class="text-left">Hostname</td><td class="txt-oflo text-right">'+i+'</td></tr><tr><td class="text-left">Location</td><td class="txt-oflo text-right">'+e+'</td></tr><tr><td class="text-left">Org</td><td class="txt-oflo text-right">'+j+'</td></tr><tr><td class="text-left">City</td><td class="txt-oflo text-right">'+d+'</td></tr><tr><td class="text-left">Country</td><td class="txt-oflo text-right">'+b+'</td></tr><tr><td class="text-left">Phone</td><td class="txt-oflo text-right">'+f+'</td></tr><tr><td class="text-left">Region</td><td class="txt-oflo text-right">'+h+"</td></tr></tbody></table></div></div></div></div>";swal({content:createElementFromHTML(a),buttons:false,className:"bg-org"})})});$(document).on("click",".allGroupsList",function(){$(this).toggleClass("active")});$(document).on("click",'li a[aria-controls="Custom data"]',function(){var a=function(d){const e=d;const c=e.getSession().getScreenLength()*(e.renderer.lineHeight+e.renderer.scrollBar.getWidth());e.container.style.height=c+"px";e.resize()};jsonEditor=ace.edit("netdataCustomTextAce");var b=ace.require("ace/mode/javascript").Mode;jsonEditor.session.setMode(new b());jsonEditor.setTheme("ace/theme/idle_fingers");jsonEditor.setShowPrintMargin(false);jsonEditor.session.on("change",function(c){$("#netdataCustomText").val(jsonEditor.getValue());$("#customize-appearance-form-save").removeClass("hidden")})});$(document).on("click",".imageManagerItem",function(){createImageSwal($(this))});$(document).on("click",".close-editHomepageItemDiv",function(){$("body").removeAttr("style");$("html").removeAttr("style")});$(document).on("click",'#homepage-Plex-form li a[aria-controls="Misc Options"]',function(){var a=function(d){const e=d;const c=e.getSession().getScreenLength()*(e.renderer.lineHeight+e.renderer.scrollBar.getWidth());e.container.style.height=c+"px";e.resize()};jsonEditor=ace.edit("homepageCustomStreamNamesAce");var b=ace.require("ace/mode/javascript").Mode;jsonEditor.session.setMode(new b());jsonEditor.setTheme("ace/theme/idle_fingers");jsonEditor.setShowPrintMargin(false);jsonEditor.session.on("change",function(c){$("#homepageCustomStreamNamesText").val(jsonEditor.getValue());$("#customize-appearance-form-save").removeClass("hidden")})});